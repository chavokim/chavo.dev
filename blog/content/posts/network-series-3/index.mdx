---
title: 네트워크를 알아보자(3) - 계층별로 알아보기(네트워크 계층)
date: 2021-10-13
image: '../network-series-2/osi-model.png'
imageAlt: Network Image
excerpt: OSI 모델에서 네트워크 계층의 역할에 대해 알아봅니다.
---

> 미즈쿠치 카츠야(2016), 「모두의 네트워크」를 읽고 요약-정리한 자료입니다.
>
> 본 글에서는 5장 네트워크 계층에 대해서 다룹니다.

# 네트워크 계층에서는 어떤 것이 일어나나요?

네트워크 간의 통신을 담당합니다. 앞서 봤던 데이터 링크 계층는 같은 네트워크 내의 전송을 담당하며,
네트워크 계층은 다른 네트워크로 데이터를 전송하는 역할을 담당합니다.
네트워크 간의 통신을 위해서는 **라우터**라는 장치를 필요로 합니다.
즉, **스위치**를 이용해서 같은 네트워크 내의 전송이 가능하고,
**라우터**를 통해서 네트워크 간의 전송이 가능하게 됩니다.

![Switch vs Router](./switch-vs-router.png)

# 유선으로 컴퓨터를 연결할 때 이를 관리하는 장치가 있나요?

네, 그러한 장비를 **허브(hub)**라고 부릅니다.

![Hub](./hub.jpg)

허브는 물리 계층에서 컴퓨터의 연결을 관리해주는 장치입니다.
랜 케이블을 통해 데이터가 들어왔을 때, 이를 증폭하여 오류가 생겼을 때 이를 교정해주는 역할도 수행합니다.
허브를 통해 데이터를 통신하는 것도 가능하지만 허브는 데이터를 송신할 때 목적지에만 데이터를 전송하는 것이 아니라
연결된 모든 컴퓨터에 데이터를 전송하게 됩니다. 이러한 특징으로 허브를 *더미 허브(dummy hub)*라고도 부릅니다.

# 다른 컴퓨터에도 데이터가 전송되면 내가 원치 않은 사람에게도 데이터가 전송된다는 것 아닌가요?

그런 문제가 있기 때문에 **데이터 링크 계층**에서 네트워크 장비 간에 신호를 주고받는 규칙을 정하는 역할을 하게 됩니다.
데이터를 주고 받는 규칙으로 일반적으로 **이더넷(Ethernet)**이라는 것을 사용합니다.
데이터 링크 계층에서 목적지 정보를 추가해서 보내고, 목적지 정보와 맞지 않은 컴퓨터는 자동으로 데이터를 파기합니다.
허브를 통해 데이터가 동시에 전송되면 *충돌(collision)*이 일어나게 되는데 충돌이 일어나지 않도록 이더넷에서 관리합니다.
이더넷에서 이러한 충돌이 일어나지 않도록 하는 방법을 **CSMA/CD**라고 합니다.

CSMA/CD는 쉽게 말해 데이터를 보내려고 하는 컴퓨터에서 케이블에 신호가 흐르고 있는지 아닌지를 확인(CS)
하고 케이블에 데이터가 흐르고 있지 않다면 데이터를 보내도 좋다(MA), 충돌이 발생하고 있는지를 확인(CD)한다는
규칙을 얘기하는 것입니다.

하지만 CSMA/CD의 경우 데이터 전송에 효율이 좋지 않기 때문에 현재는 사용하지 않고,
**스위치(Switch)**라는 장비를 사용해서 이를 해결합니다.

# 스위치는 무엇이고, 허브와는 어떤 차이가 있나요?

스위치도 허브처럼 컴퓨터 연결을 관리해주는 장치입니다. 하지만 스위치는 허브와 달리
**MAC 주소 테이블(MAC address table)**을 가집니다.
해당 테이블에 연결되어 있는 컴퓨터의 주소**(MAC 주소)**가 등록되는 데이터베이스를 뜻합니다.

처음 스위치를 작동시켰을 때에는 MAC 주소 테이블은 비어있습니다.
스위치를 통해서 데이터 전송이 일어날 때,
스위치는 데이터가 전송된 컴퓨터에서 온 데이터를 보고 해당 컴퓨터의 포트와
MAC 주소를 MAC 주소 테이블에 등록합니다.
이렇게 MAC 주소 테이블을 만드는 과정을 **MAC 주소 학습 기능**이라고 말합니다.

목적지의 컴퓨터의 주소가 아직 없다면 허브에서처럼 포트에 연결된 나머지 컴퓨터에 모두 데이터를 보냅니다.
이를 **플러딩(flooding)**이라 하며,
만약 목적지의 컴퓨터 주소가 테이블에 있다면 해당 포트에만 데이터를 보낼 수 있습니다.
이것이 허브와의 가장 큰 차이이며, 허브와 달리 송수신을 동시에 할 수 있는 **전이중 통신**이 가능하다는 장점이 있습니다.

허브는 **반이중 통신**만 가능하기 때문에 송수신을 동시에 할 수 없고, 수신을 하는 중에는 수신만, 송신을 하는 중에는 송신만 가능합니다.

이러한 특징때문에 현재는 허브가 거의 사용되지 않으며 스위치가 더 많이 사용됩니다.

# MAC 주소는 무엇이며, 스위치는 어떻게 데이터를 보고 출발지의 컴퓨터 주소와 도착지의 컴퓨터 주소를 알 수 있나요?

MAC 주소는 랜카드마다 붙어있는 고유한 주소를 뜻합니다. 총 48비트로 구성되어 있는데 앞 24비트는 랜 카드 제조사 번호이며,
뒤 24비트는 제조사가 랜 카드에 붙인 일련번호를 뜻합니다. 이를 통해 어떤 컴퓨터인지를 구분할 수 있는 것입니다.

저번 글에서 데이터 전송을 위해 캡슐화가 일어나고 데이터 링크 계층에서 헤더와 트레일러가 붙는 것을 배웠습니다.
이곳에서 붙이는 헤더를 **이더넷 헤더**라 하며, 헤더 속에 **(1) 목적지의 MAC 주소(6바이트)**, **(2) 출발지 MAC 주소(6바이트)**,
**(3) 유형(2바이트)**의 정보가 포함됩니다. 유형은 이더넷으로 전송되는 데이터의 프로토콜 종류를 나타냅니다.

트레일러는 **FCS(Frame Check Sequence)**라고도 부르며, 데이터 전송 도중에 오류가 발생하는지 확인하는 용도로 사용됩니다.

스위치에서는 역캡슐화 과정에서 이더넷 헤더에 대한 정보를 통해 출발지 MAC 주소와 도착지 MAC 주소에 대해 아는 것입니다.

# 요약

**물리 계층**은 데이터를 전기 신호로 바꾸어주는 역할을 하고, **랜 카드**가 실제로 데이터를 전기 신호로 바꾸어주는 역할을 합니다.
**데이터 링크 계층**은 데이터가 전송되는 규칙을 관리하고 출발지가 어딘지, 목적지가 어딘지를 판단해주는 역할을 합니다.

물리 계층과 데이터 링크 계층만으로는 넓은 범위에 있는 네트워크에 있는 컴퓨터에 전송할 수 없습니다.
다음 시간에는 이러한 전송을 관리해주는 네트워크 계층과
데이터가 올바른 형태로 갈 수 있도록 체크하는 전송 계층의 역할에 대해서 알아봅시다.
