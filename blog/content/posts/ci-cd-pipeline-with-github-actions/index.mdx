---
title: Github Actionsë¡œ ë§Œë‚˜ëŠ” CI/CD
date: 2021-09-22
image: './CI-CD.png'
imageAlt: Workflow in CI/CD
excerpt: CI/CDì— ëŒ€í•œ ì„¤ëª…ê³¼ ì´ë¥¼ Github Actionìœ¼ë¡œ ì–´ë–»ê²Œ êµ¬í˜„í•˜ëŠ”ì§€ ì•Œì•„ë´…ë‹ˆë‹¤.
---

# CI/CDê°€ ë¬´ì—‡ì¸ê°€?
CI/CDëŠ” (1)`Continuous Integration`ê³¼ (2)`Continuos Deployment/Delivery`ì˜ ì•½ì–´ë¡œ
(1) ìƒˆë¡­ê²Œ ì§  ì½”ë“œë¥¼ ê¸°ì¡´ì˜ ì½”ë“œì™€ í•©ì¹  ë•Œ, `ì˜¤ë¥˜ì—†ì´` (2) ì‹¤ì œ Production levelê¹Œì§€ ë°°í¬ë˜ëŠ” ê³¼ì •ì„ `ìë™í™”`í•˜ëŠ” ê²ƒì„ ëœ»í•œë‹¤.
ìƒˆë¡­ê²Œ ì§  ì½”ë“œê°€ ê¸°ì¡´ì˜ ì½”ë“œì™€ ì¶©ëŒì—†ì´ í•©ì³ì§€ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ìƒˆë¡œìš´ ì½”ë“œë¥¼ `Build`í•´ë³´ê³ , ë¡œì§ì´ ì œëŒ€ë¡œ ì‘ë™í•˜ëŠ”ì§€ `Test`í•˜ê³ ,
ê¸°ì¡´ì˜ Commitë“¤ê³¼ ì¶©ëŒì—†ì´ `Merge`í•˜ëŠ”ì§€ ì²´í¬í•œë‹¤.
ì´ ê³¼ì •ì´ ì˜¤ë¥˜ì—†ì´ ì§„í–‰ëœë‹¤ë©´ ìƒˆë¡­ê²Œ ì§  ì½”ë“œì™€ ê¸°ì¡´ì˜ ì½”ë“œê°€ í•©ì³ì§„ì±„ë¡œ Main Repositoryì— `Release`ë˜ê³ ,
ì‹¤ì œ Productionìœ¼ë¡œ `Deploy`ëœë‹¤.

# CI/CDë¥¼ ìœ„í•´ ì–´ë–¤ í”„ë¡œê·¸ë¨ì´ ì´ìš©ë˜ë‚˜?
ê´‘ë²”ìœ„í•˜ê²Œ ì“°ì´ëŠ” ê²ƒìœ¼ë¡œëŠ” `Github Actions`, `Jenkins`, `Circle CI`ê°€ ìˆë‹¤.

ë¨¼ì € `Jenkins`ì™€ `Github Actions`ë¥¼ ë¹„êµí•˜ë©´ [ë‹¤ìŒ ê¸€](https://blog.bitsrc.io/github-actions-or-jenkins-making-the-right-choice-for-you-9ac774684c8)ì—ì„œ ì˜ í™•ì¸í•  ìˆ˜ ìˆëŠ”ë°,
ì••ë„ì ìœ¼ë¡œ Github Actionsì˜ ì¥ì ì´ ë” ë§ì€ ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.*(ë³„ë„ì˜ Serverê°€ í•„ìš”ì—†ê³ , Asyncí•œ CI/CDê°€ ê°€ëŠ¥í•˜ê³ , ì–´ëŠ í™˜ê²½ì• ì„œë‚˜ ìˆ˜í–‰ ê°€ëŠ¥)*

`Circle CI`ì™€ `Github Actions`ë¥¼ [ë¹„êµí•œ ê¸€](https://www.devopsauthority.tech/2021/02/08/github-actions-vs-circleci-comparing-ci-cd-platforms/)ì—ì„œëŠ” ì¥ë‹¨ì ì´ ë°˜ë°˜ ë“œëŸ¬ë‚˜ëŠ”ë°,
Circle CIê°€ Github Actionsì— ë¹„í•´ ë¨¼ì € ë‚˜ì™”ê¸° ë•Œë¬¸ì— ì§€ì›í•˜ëŠ” ê¸°ëŠ¥ì´ ë” ë§ê³ , GPUë¡œ ëŒì•„ê°€ëŠ” build ì˜µì…˜ì„ ì œê³µí•´ì¤€ë‹¤.
í•˜ì§€ë§Œ Github ActionsëŠ” repositoryì—ì„œì˜ ì½”ë“œ ê´€ë¦¬ì™€ CI/CD pipelineì„ í•˜ë‚˜ì˜ ì¸í„°í˜ì´ìŠ¤ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì¥ì ì´ ìˆê³ ,
ë¬´ë£Œ í”Œëœë„ Circle CIì— ë¹„í•´ ë‘ ë°°ì •ë„ ë” ë§ì€ ì‹œê°„ì„ ì œê³µí•˜ê¸° ë•Œë¬¸ì— ë©”ë¦¬íŠ¸ê°€ ìˆë‹¤.

1. Build ê³¼ì •ì´ GPUë¥¼ ëŒë¦´ ì •ë„ë¡œ ë›°ì–´ë‚œ ì—°ì‚° ê³¼ì •ì´ í•„ìš”í•˜ì§€ ì•Šê³ ,
2. ì†ŒìŠ¤ ì½”ë“œ ê´€ë¦¬ì™€ CI/CD í”„ë¡œì„¸ìŠ¤ë¥¼ í•˜ë‚˜ì˜ ì¸í„°í˜ì´ìŠ¤ì—ì„œ í™•ì¸ ê°€ëŠ¥

í•œ ì ìœ¼ë¡œ `Github Actions`ë¥¼ CI/CD í”„ë¡œê·¸ë¨ìœ¼ë¡œ ì„ íƒí•˜ì˜€ë‹¤.

# Github Actions(GA)ë¡œ CI/CD pipelineì„ ì–´ë–»ê²Œ êµ¬í˜„í•˜ë‚˜?

Githubì—ì„œ ì œê³µí•œ [tutorial](https://docs.github.com/en/actions/quickstart)ì„ í† ëŒ€ë¡œ ì„¤ëª…í•˜ê² ë‹¤.

1. ë¨¼ì € repositoryì— `.github/workflows`ë¼ëŠ” directoryë¥¼ ìƒì„±í•œë‹¤.
2. í•´ë‹¹ directoryì— `ì›í•˜ëŠ”_ì´ë¦„.yml`ì´ë¼ëŠ” ì´ë¦„ì˜ íŒŒì¼ì„ ìƒì„±í•œë‹¤.(GAëŠ” `.yml` íŒŒì¼ì—ì„œ ì‘ë™í•œë‹¤.)
3. ì•„ë˜ì™€ ê°™ì€ ì½”ë“œë¥¼ í•´ë‹¹ íŒŒì¼ì— ì‘ì„±í•œë‹¤.
```yaml
name: GitHub Actions Demo # github actions ì´ë¦„
on: [push] # ì–¸ì œ Github Actionsë¥¼ ìˆ˜í–‰í•  ê²ƒì¸ì§€
jobs: # ìˆ˜í–‰í•  jobë“¤
  Explore-GitHub-Actions: # jobì˜ ì´ë¦„
    runs-on: ubuntu-latest # ì–´ëŠ í”Œë«í¼ ìœ„ì—ì„œ ìˆ˜í–‰í•  ê²ƒì¸ê°€?
    steps: # job ë‚´ë¶€ì—ì„œ ìˆ˜í–‰í•  stepë“¤
    # github ë‚´ë¶€ì˜ í™˜ê²½ë³€ìˆ˜ë¡œ GA ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŒ. ex) github.event_name
      - run: echo "ğŸ‰ The job was automatically triggered by a ${{ github.event_name }} event."
      - run: echo "ğŸ§ This job is now running on a ${{ runner.os }} server hosted by GitHub!"
      - run: echo "ğŸ” The name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}."
      - name: Check out repository code
        uses: actions/checkout@v2
      - run: echo "ğŸ’¡ The ${{ github.repository }} repository has been cloned to the runner."
      - run: echo "ğŸ–¥ï¸ The workflow is now ready to test your code on the runner."
      - name: List files in the repository
        run: |
          ls ${{ github.workspace }}
      - run: echo "ğŸ This job's status is ${{ job.status }}."
```
4. ì•„ë¬´ branchì— pushë¥¼ í•˜ë©´ GAê°€ ìˆ˜í–‰ëœë‹¤.
5. repositoryì˜ `nav-bar`ì—ì„œ `Actions`ë¥¼ ëˆ„ë¥´ë©´ Actionsì˜ ìˆ˜í–‰ ìƒí™©ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

![Actions Tab in Github Repository](./actions-tab.png)

ë³¸ì¸ì˜ repositoryì•  ì–´ë–»ê²Œ ì ìš©í•´ì•¼í• ì§€ ëª¨ë¥´ëŠ” ì‚¬ëŒë“¤ì„ ìœ„í•´ [stater](https://github.com/actions/starter-workflows)ë¥¼ ì œê³µí•œë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ Djangoì˜ repositoryì— CI pipelineì„ êµ¬í˜„í•˜ë ¤ê³  í•œë‹¤ë©´ `ci/django.yml`ì„ ë³´ë©´ ëœë‹¤.
```yaml
name: Django CI

on:
  push:
    branches: [ $default-branch ]
  pull_request:
    branches: [ $default-branch ]

jobs:
  build:

    runs-on: ubuntu-latest
    strategy:
      max-parallel: 4
      matrix:
        python-version: [3.7, 3.8, 3.9]

    steps:
    - uses: actions/checkout@v2
    - name: Set up Python ${{ matrix.python-version }}
      uses: actions/setup-python@v2
      with:
        python-version: ${{ matrix.python-version }}
    - name: Install Dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
    - name: Run Tests
      run: |
        python manage.py test
```
