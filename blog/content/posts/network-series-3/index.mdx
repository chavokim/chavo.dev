---
title: 네트워크를 알아보자(3) - 계층별로 알아보기(네트워크 계층)
date: 2021-10-13
image: '../network-series-2/osi-model.png'
imageAlt: Network Image
excerpt: OSI 모델에서 네트워크 계층의 역할에 대해 알아봅니다.
---

> 미즈쿠치 카츠야(2016), 「모두의 네트워크」를 읽고 요약-정리한 자료입니다.
>
> 본 글에서는 5장 네트워크 계층에 대해서 다룹니다.

# 네트워크 계층에서는 어떤 것이 일어나나요?

네트워크 간의 통신을 담당합니다. 앞서 봤던 데이터 링크 계층는 같은 네트워크 내의 전송을 담당하며,
네트워크 계층은 다른 네트워크로 데이터를 전송하는 역할을 담당합니다.
네트워크 간의 통신을 위해서는 **라우터**라는 장치를 필요로 합니다.
앞서 봤던 **스위치**를 이용해서는 같은 네트워크 내의 전송이 가능하고,
**라우터**를 통해서 네트워크 간의 전송이 가능하게 됩니다.

![Switch vs Router](./switch-vs-router.png)

# 같은 네트워크 내에서 전송할 때는 MAC 주소를 사용했는데, 네트워크 간의 전송에서는 어떤 주소를 사용하나요?

네트워크 간의 전송에서는 **IP 주소**를 사용합니다. 라우터는 스위치가 MAC 주소 테이블을 관리하듯이 **라우팅 테이블**이
존재해서 IP 간의 경로 정보를 등록하고, 관리합니다.

네트워크 계층에서 캡슐화할 때 **IP 헤더**를 붙입니다. IP 헤더에는
1. 버전(version)
2. 헤더 길이(header length)
3. 서비스 유형(service type)
4. 전체 패킷 길이(total length)
5. ID(identification)
6. 조각 상태(flags)
7. 조각의 위치(fragment offset)
8. TTL,
9. 프로토콜(protocol)
10. 헤더 페크섭(header checksum)
11. **출발지 IP 주소**
12. **목적지 IP 주소**

로 구성이 됩니다. 네트워크 계층에서 IP 헤더가 추가된 데이터를 **IP 패킷**이라고 합니다.

IP 주소는 인터넷 서비스 제공자(ISP)에게 제공받으며, IP 버전의 종류는 **IPv4**와 **IPv6**이 있습니다.

IPv4는 현재 주로 사용하고 있는 IP 주소로 32비트로 되어 있어 약 *43억개*의 주소를 만들 수 있습니다. 인터넷이
널리 보급되면서 IP 주소가 부족한 상황이 왔고, IPv6는 128비트로 되어 있어 IPv4보다 훨씬 더 많은 주소를 만들 수 있습니다.

IP 주소는 *공인 IP 주소*와 *사설 IP 주소*가 존재합니다. 현재 IPv4의 주소가 부족한 상황이라 라우터에는 유일한
공인 IP 주소를 배정하고 네트워크 내부의 컴퓨터들에게는 사설 IP 주소를 배정합니다. 라우터의 **DHCP** 기능을 사용되면
사설 IP 주소를 자동으로 할당할 수 있습니다.

IP 주소를 편하게 부르기 위해, 8비트 단위로 나누어 표기하는데 8비트를 *옥텟*이라고도 부릅니다.
IPv4의 경우에는 각각의 옥텟을 10진수로 바꾸어 표시합니다.

![IPv4 vs IPv6](./ipv4ipv6.jpeg)

또 IP 주소의 구성을 보면 *네트워크 ID*와 *호스트 ID*로 나누어서 구성되어 있습니다.
네트워크 ID의 경우는 해당 네트워크의 ID 값을 표현하고, 호스트 ID는 네트워크 내에서의 다른 네트워크 기기를 표시합니다.
IP 주소(IPv4)의 32비트 중 네트워크 ID 비트의 크기에 따라 담을 수 있는 기기의 개수가 달라집니다.

IP 주소의 클래스라는 개념으로 네트워크 크기를 구분하게 됩니다.

| 클래스 이름 	| 내용                       	|
|-------------	|----------------------------	|
| A 클래스    	| 대규모 네트워크 주소       	|
| B 클래스    	| 중형 네트워크 주소         	|
| C 클래스    	| 소규모 네트워크 주소       	|
| D 클래스    	| 멀티캐스트(multicast) 주소 	|
| E 클래스    	| 연구 및 특수용도 주소      	|

A 클래스는 처음 8비트가 네트워크 ID고 나머지 24비트가 호스트 ID,
B 클래스는 처음 16비트가 네트워크 ID고 나머지 16비트가 호스트 ID,
C 클래스는 처음 24비트가 네트워크 ID고 나머지 8비트가 호스트 ID가 됩니다.

# 요약

**물리 계층**은 데이터를 전기 신호로 바꾸어주는 역할을 하고, **랜 카드**가 실제로 데이터를 전기 신호로 바꾸어주는 역할을 합니다.
**데이터 링크 계층**은 데이터가 전송되는 규칙을 관리하고 출발지가 어딘지, 목적지가 어딘지를 판단해주는 역할을 합니다.

물리 계층과 데이터 링크 계층만으로는 넓은 범위에 있는 네트워크에 있는 컴퓨터에 전송할 수 없습니다.
다음 시간에는 이러한 전송을 관리해주는 네트워크 계층과
데이터가 올바른 형태로 갈 수 있도록 체크하는 전송 계층의 역할에 대해서 알아봅시다.
